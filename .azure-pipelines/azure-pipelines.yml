stages:
- stage: Test_Primary
  jobs:
  - job:
    strategy:
      matrix:
        Python27-Linux:
          python.version: '2.7'
          vmImage: ubuntu-latest
        Python37-Linux:
          python.version: '3.7'
          vmImage: ubuntu-latest
    pool:
      vmImage: $[ variables.vmImage ]
    steps:
    - template: steps/run-tests.yml

- stage: Test_Secondary
  jobs:
  - job:
    strategy:
      matrix:
        Python34-Linux:
          python.version: '3.4'
          vmImage: ubuntu-latest
        Python35-Linux:
          python.version: '3.5'
          vmImage: ubuntu-latest
        Python36-Linux:
          python.version: '3.6'
          vmImage: ubuntu-latest
    pool:
      vmImage: $[ variables.vmImage ]
    steps:
    - template: steps/run-tests.yml

- stage: Package
  jobs:
  - template: jobs/package.yml
    parameters:
      vmImage: ubuntu-latest

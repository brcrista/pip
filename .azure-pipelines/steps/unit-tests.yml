steps:
- task: UsePythonVersion@0
  displayName: Use Python $(python.version)
  inputs:
    versionSpec: '$(python.version)'

- bash: pip install --upgrade setuptools tox
  displayName: Install Tox

- script: tox -e py -- -m unit --junit-xml=junit/unit-test.xml
  displayName: Tox run unit tests

- task: PublishTestResults@2
  displayName: Publish Test Results
  inputs:
    testResultsFiles: junit/*.xml
    testRunTitle: 'Python $(python.version)'
  condition: succeededOrFailed()